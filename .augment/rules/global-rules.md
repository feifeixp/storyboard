---
type: "always_apply"
description: "通用开发规范，适用于所有项目的代码操作、规则管理和开发日志记录"
scope: "global"
---

# Augment Code 全局规则配置文件

**版本**: 1.0  
**作用域**: 全局（所有项目）  
**最后更新**: 2024-12-26

> 💡 **使用说明**：
> - 本文件包含适用于所有项目的通用开发规范
> - 可以复制到其他项目的 `.augment/rules/` 目录中使用
> - 项目特定规则应放在单独的 `project-rules.md` 文件中

---

## 规则分组

### 1️⃣ 通用代码操作规则

#### R001: 代码操作前置校验
- **规则类型**: mandatory（强制）
- **描述**: 代码增删改前必须输出方案和影响分析，用户确认后执行
- **触发条件**: 
  - 代码修改 (code_modify)
  - 代码删除 (code_delete)
  - 代码新增 (code_add)
- **执行动作**:
  1. 拦截直接操作
  2. 生成分析报告（包含：操作范围、目的、影响、风险、备选方案）
  3. 等待用户确认
- **验证**: 报告必须包含所有关键信息

#### R002: 代码完整性约束
- **规则类型**: mandatory（强制）
- **描述**: 生成/修改的代码必须包含注释、异常处理、依赖说明
- **触发条件**:
  - 代码生成 (code_generate)
  - 代码修改 (code_modify)
- **检查项**:
  - ✅ 基础注释
  - ✅ 异常处理
  - ✅ 依赖说明
- **验证**: 缺失要素时提示补充

#### R006: 规则简洁性约束
- **规则类型**: mandatory（强制）
- **描述**: 单条规则内容控制在500行以内，复杂规则拆分子规则
- **触发条件**:
  - 规则创建 (rule_create)
  - 规则编辑 (rule_edit)
- **限制**: 最大500行
- **验证**: 超过限制时提示拆分

---

### 2️⃣ 规则设计与维护指南

#### G001: 复杂概念拆分
- **规则类型**: guideline（建议）
- **描述**: 将复杂概念拆分为多个可组合的小规则
- **示例**:
  ```
  原规则："优化代码性能并保证兼容性"
  拆分后：
  1. G001-1：优化代码性能（选择高效数据结构）
  2. G001-2：保证代码兼容性（适配主流运行环境）
  ```

#### G002: 规则添加示例
- **规则类型**: guideline（建议）
- **描述**: 规则中添加具体示例/代码片段提升可理解性

#### G003: 手动调用规则
- **规则类型**: guideline（建议）
- **描述**: 交互时可通过 @规则名 手动调用特定规则
- **示例**: `@R001 帮我修改这段代码` → 优先执行 R001 规则

#### G004: 及时固化规则
- **规则类型**: guideline（建议）
- **描述**: 重复强调的要求及时固化为规则

---

### 3️⃣ 开发日志记录规范

#### R007: 开发日志强制记录
- **规则类型**: mandatory（强制）
- **描述**: 重大功能开发、架构调整、问题修复时必须记录开发日志
- **触发条件**:
  - 重大功能开发 (major_feature_development)
  - 架构调整 (architecture_adjustment)
  - 问题修复 (bug_fix)
  - 代码重构 (refactoring)
  - 性能优化 (performance_optimization)

**日志模板**:
```markdown
## [YYYY-MM-DD HH:MM] {图标} {变更类型}

**修改内容**：{50-200字摘要}

**影响范围**：
- 文件/模块：{具体文件列表}

**修改原因**：{为什么要做这个修改}

**预期效果**：{期望达到的效果}

**相关文档**：{相关技术文档链接}

---
```

**变更类型**:
- ✨ 新功能 (feature)
- 🐛 问题修复 (fix)
- ♻️ 代码重构 (refactor)
- ⚡ 性能优化 (perf)
- 🏗️ 架构调整 (arch)
- 📝 文档更新 (docs)

**验证规则**:
- ✅ 时间格式: YYYY-MM-DD HH:MM
- ✅ 摘要长度: 50-200字
- ✅ 必填字段: timestamp, change_type, summary, affected_files, reason, expected_result
- ✅ 不包含代码细节

**最佳实践**:
1. 及时记录 - 完成修改后立即记录
2. 简洁明确 - 突出核心修改点
3. 关联文档 - 添加详细技术文档引用
4. 分类清晰 - 使用标准分类
5. 避免代码 - 不粘贴代码片段

---

## 📚 使用指南

### 在新项目中使用全局规则

1. **复制全局规则文件**:
   ```bash
   mkdir -p .augment/rules
   cp path/to/global-rules.md .augment/rules/
   ```

2. **创建项目特定规则**:
   ```bash
   # 创建 project-rules.md，定义项目特定规则
   ```

3. **更新 README.md**:
   说明项目使用了哪些全局规则和项目规则

### 规则优先级

```
项目规则 (project-rules.md)
  ↓ 覆盖
全局规则 (global-rules.md)
  ↓ 覆盖
Augment 默认规则
```

---

**创建时间**: 2024-12-26  
**维护人**: AI Assistant  
**适用范围**: 所有项目

